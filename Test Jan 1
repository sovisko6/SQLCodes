from sqlalchemy import create_engine, Column, Integer, String, Numeric, Date
from sqlalchemy.orm import sessionmaker, declarative_base


DB_URL = 'postgresql://jan:jan@localhost:5432/postgres'  
engine = create_engine(DB_URL)

# 2. Definice Modelu (aby Python věděl, jak vypadá tabulka Stenata)
Base = declarative_base()

class Stene(Base):
    __tablename__ = 'stenata'  # název tabulky v db [cite: 8]
    id_stenete = Column(Integer, primary_key=True)
    jmeno_char = Column(String)
    cena_stenete = Column(Numeric)
    datum_narozeni = Column(Date)

# 3. Vytvoření Session (to ti chybělo)
Session = sessionmaker(bind=engine)
session = Session()

# 4. Samotná akce (Čtení dat)
try:
    print("--- Seznam štěňat v nabídce ---")
    stenata = session.query(Stene).all()
    for s in stenata:
        print(f"Jméno: {s.jmeno_char} | Cena: {s.cena_stenete} Kč")
except Exception as e:
    print(f"Chyba: {e}")
finally:
    session.close()
